<title>Authentification | Inscription</title>


<div class="w-full h-screen flex bg-cover items-center bg-blue-50">
  <div class="relative flex flex-wrap mx-4 justify-center w-full">
    <div class="inline-flex justify-center w-full h-full bg-slate-50 rounded-xl overflow-hidden drop-shadow-2xl">
      <div class="p-10 hidden lg:block w-full bg-blue-500 rounded-l-2xl">
      </div>
      <mat-card class="w-full my-0 mx-auto flex flex-col">
        <mat-card-content class="p-10 w-full min-h-[70dvh] flex flex-col gap-4 justify-evenly">
          <div class="flex flex-row justify-between w-full items-center">

            <img src="./assets/images/logos/ReviveAuto-1.svg" class="align-middle m-2 aspect-square w-16" alt="logo" />

            <h1 class="mx-4 text-3xl font-bold">S'inscrire!</h1>
          </div>
          <form class="flex flex-col gap-2 h-full justify-evenly" (ngSubmit)="submit()" [formGroup]="form">
            <div class="flex flex-row gap-1 w-full">
              <div class="w-full">
                <mat-label class="text-gray-900">Nom</mat-label>
                <div
                  class="rounded-xl w-full border border-slate-300 h-10 focus-within:outline focus-within:outline-blue-500">
                  <input matinput class="w-full focus:outline-0 h-full px-2" formControlName="name"
                    placeholder="RAKOTO" />
                </div>
                @if (form.get('mail')?.invalid && (form.get('mail')?.dirty || form.get('mail')?.touched)) {
                <mat-error><span class="text-xs text-red-500">
                    @if (form.get('name')?.hasError('required')) {
                    Veuillez entrer votre nom
                    }</span></mat-error>
                }
              </div>
              <div class="w-full">
                <mat-label class="text-gray-900">Prénoms</mat-label>
                <div
                  class="rounded-xl w-full border border-slate-300 h-10 focus-within:outline focus-within:outline-blue-500">
                  <input matinput class="w-full focus:outline-0 h-full px-2" formControlName="firstname"
                    placeholder="Jean" />
                </div>
                @if (form.get('firstname')?.invalid && (form.get('firstname')?.dirty || form.get('firstname')?.touched))
                {
                <mat-error><span class="text-xs text-red-500">
                    @if (form.get('firstname')?.hasError('required')){ Veuillez entrer votre prénoms}</span></mat-error>
                }
              </div>
            </div>

            <div class="flex flex-row gap-1 w-full">
              <div class="w-full">
                <mat-label class="text-gray-900">Date de Naissance</mat-label>
                <div class="w-full items-center flex flex-row rounded-xl border
                  border-slate-300 h-10 px-2 focus-within:outline focus-within:outline-blue-500">
                  <input class="focus:outline-0 w-full h-full" [matDatepicker]="picker" formControlName="birth_date">
                  <mat-datepicker class="border border-r-red-300 bg-white drop-shadow-md" color="primary"
                    #picker></mat-datepicker>
                  <button class="aspect-square" (click)="picker.open()"><i-tabler
                      class="aspect-squarew-5 text-black iconify" name="calendar" /></button>
                </div>
                @if (form.get('birth_date')?.invalid && (form.get('birth_date')?.dirty ||
                form.get('birth_date')?.touched))
                {
                <mat-error><span class="text-xs text-red-500">
                    @if (form.get('birth_date')?.hasError('required')){ Veuillez entrer votre
                    prénoms}</span></mat-error>
                }

              </div>

              <div class="w-full">
                <mat-label class="text-gray-900">Sexe</mat-label>
                <div
                  class="rounded-xl w-full border border-slate-300 h-10 focus-within:outline focus-within:outline-blue-500">
                  <select class="w-full focus:outline-0 px-2 h-full" matNativeControl formControlName="gender">
                    <option value="masculin">Homme</option>
                    <option value="feminin">Femme</option>
                  </select>
                </div>
              </div>

            </div>

            <div class="w-full">
              <mat-label class="text-gray-900">CIN</mat-label>
              <div
                class="rounded-xl w-full border border-slate-300 h-10 focus-within:outline focus-within:outline-blue-500">
                <input matinput class="w-full focus:outline-0 h-full px-2 h-full" formControlName="CIN"
                  placeholder="Jean" />
              </div>
              @if (form.get('CIN')?.invalid && (form.get('CIN')?.dirty || form.get('CIN')?.touched)) {

              <mat-error><span class="text-xs text-red-500">@if (form.get('CIN')?.hasError('required')) {Veuillez entrer
                  votre CIN}</span></mat-error>
              }
            </div>
            <div>
              <mat-label class="text-gray-900">Mail</mat-label>
              <div
                class="rounded-xl w-full border border-slate-300 h-10 focus-within:outline focus-within:outline-blue-500">
                <input matinput class="w-full focus:outline-0 h-full px-2" formControlName="mail" email />
              </div>
              @if (form.get('mail')?.invalid && (form.get('mail')?.dirty || form.get('mail')?.touched)) {

              <mat-error><span class="text-xs text-red-500">@if (form.get('mail')?.hasError('required')) {Veuillez
                  entrer votre email}
                  @if (form.get('mail')?.hasError('email')) {
                  Veuillez entrer un email valide }
                  @if (form.get('mail')?.hasError('incorrect')) {Cet email n'est pas encore inscrit
                  }
                </span></mat-error>
              }
            </div>

            <div class="w-full">
              <mat-label class="text-gray-900">Téléphone</mat-label>
              <div
                class="rounded-xl w-full border border-slate-300 h-10 focus-within:outline focus-within:outline-blue-500">
                <input matinput class="w-full focus:outline-0 h-full px-2" formControlName="phone" placeholder="Jean" />
              </div>
              @if (form.get('phone')?.invalid && (form.get('phone')?.dirty || form.get('phone')?.touched)) {

              <mat-error><span class="text-xs text-red-500">@if (form.get('phone')?.hasError('required'))
                  {Veuillez entrer votre numero de téléphone}</span></mat-error>
              }
            </div>

            <div>
              <label class="text-gray-900">Mot de passe</label>
              <div class="rounded-xl w-full border border-slate-300 h-10 focus-within:outline
                focus-within:outline-blue-500">
                <input matinput class="w-full focus:outline-0 h-full px-2" type="password" formControlName="password" />
              </div>
              @if (form.get('password')?.invalid && (form.get('password')?.dirty || form.get('password')?.touched)) {

              <mat-error><span class="text-xs text-red-500">@if (form.get('password')?.hasError('required'))
                  {Veuillez entrer votre mot de passe}
                </span></mat-error>
              }
            </div>

            <div>
              <label class="text-gray-900">Confirmer mot de passe</label>
              <div class="rounded-xl w-full border border-slate-300 h-10 focus-within:outline
                focus-within:outline-blue-500">
                <input matinput class="w-full focus:outline-0 h-full px-2" type="password" formControlName="password" />
              </div>
              @if (form.get('password_confirm')?.invalid && (form.get('password_confirm')?.dirty ||
              form.get('password_confirm')?.touched)) {
              <mat-error><span class="text-xs text-red-500">
                  @if (form.get('password_confirm')?.hasError('required')) {Veuillez confirmer votre mot de passe}
                  @if (form.get('password_confirm')?.hasError('notSame')) {Le mot de passe est différent}
                </span></mat-error>
              }
            </div>
            <hr class="bg-stone-300 w-full h-[1px]" />
            <button type="submit" [disabled]="form.invalid"
              class="w-full bg-blue-500 disabled:bg-gray-500/50 text-white p-3 rounded-xl">
              S'inscrire
            </button>
          </form>

          <span class="w-full items-center text-center">
            <a [routerLink]="['/login']" class="text-blue-400 w-full">
              Se connecter</a>
          </span>
        </mat-card-content>
        <!--         <button type="button" (click)="test()">Test</button> -->
      </mat-card>

    </div>
  </div>
</div>
